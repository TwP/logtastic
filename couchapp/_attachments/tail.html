<!DOCTYPE html>
<html>
  <head>
    <title>CouchApp Logging</title>
    <link rel="stylesheet" href="style/main.css" type="text/css">
    <script src="/_utils/script/json2.js"></script>
    <script src="/_utils/script/jquery.js?1.3.1"></script>
    <script src="/_utils/script/jquery.couch.js?0.9.0"></script>
    <script src="vendor/couchapp/jquery.couchapp.js"></script>
    <script src="script/logging.js"></script>
    <script src="script/log_event_poller.js"></script>
    <script src="script/event_table.js"></script>
    <script src="script/event_filters.js"></script>
    <script type="text/javascript" charset="utf-8">
      logging.ready(function() {
        var table = logging.eventTable({table: '#tail'});
        var filters = logging.eventFilters({table: table});
        table.setup();

        var poller = logging.logEventPoller({
          interval: 5000,
          success: function( json ) { table.addEvents(json); }
        });
        poller.start();

        $('#tail tfoot button').click(function() {
          if (poller.running()) {
            poller.stop();
            $(this).text('Play');
          } else {
            poller.start();
            $(this).text('Pause');
          }
        });
      });
    </script>
  </head>
  <body>
    <div id="header">
      <h1>Logging</h1>
      <ul>
        <li><a href="index.html">Overview</a></li>
        <li class="selected">Tail</li>
      </ul>
    </div>
    <div id="sidebar">
      <ul id="filter">
      </ul>
    </div>
    <div id="content">
      <table id="tail" class="logging">
        <thead>
          <tr>
            <th class="timestamp">Time</th>
            <th class="app-id">Application</th>
            <th class="logger">Logger</th>
            <th class="level">Level</th>
            <th class="message">Message</th>
          </tr>
        </thead>
        <tfoot>
          <tr>
            <td colspan="4">Latest: </td>
            <td style="text-align:right">
              <button>Pause</button>
            </td>
          </tr>
        </tfoot>
        <tbody>
        </tbody>
      </table>
    </div>
  </body>
</html>
